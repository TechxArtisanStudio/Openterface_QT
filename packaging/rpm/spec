Name:           openterfaceqt
Version:        ${VERSION}
Release:        1
Summary:        OpenterfaceQT Mini-KVM Application

License:        AGPL-3.0
URL:           https://github.com/TechxArtisanStudio/Openterface_QT

# Bundled Qt, no external Qt dependencies
Requires: libusb

%description
OpenterfaceQT Application

%install
mkdir -p %{buildroot}/usr/bin
mkdir -p %{buildroot}/usr/lib
mkdir -p %{buildroot}/usr/lib/qt6/plugins
mkdir -p %{buildroot}/usr/lib/qt6/qml
mkdir -p %{buildroot}/usr/share/icons/hicolor/256x256/apps
mkdir -p %{buildroot}/usr/share/applications

cp -r %{_sourcedir}/openterfaceQT %{buildroot}/usr/bin/
cp %{_sourcedir}/libQt6*.so* %{buildroot}/usr/lib/ 2>/dev/null || true
cp -r %{_sourcedir}/qt6-plugins/* %{buildroot}/usr/lib/qt6/plugins/ 2>/dev/null || true
cp -r %{_sourcedir}/qt6-qml/* %{buildroot}/usr/lib/qt6/qml/ 2>/dev/null || true
cp %{_sourcedir}/icon_256.png %{buildroot}/usr/share/icons/hicolor/256x256/apps/openterfaceQT.png

cat > %{buildroot}/usr/share/applications/openterfaceQT.desktop << EOF
[Desktop Entry]
Version=${VERSION}
Type=Application
Name=OpenterfaceQT
Exec=env QT_PLUGIN_PATH=/usr/lib/qt6/plugins QML2_IMPORT_PATH=/usr/lib/qt6/qml /usr/bin/openterfaceQT
Icon=openterfaceQT
Comment=OpenterfaceQT Application
Categories=Utility;
EOF


%files
/usr/bin/openterfaceQT
/usr/lib/libQt6*.so*
/usr/lib/qt6/plugins/
/usr/lib/qt6/qml/
/usr/share/icons/hicolor/256x256/apps/openterfaceQT.png
/usr/share/applications/openterfaceQT.desktop

%changelog
* Tue Mar 19 2025 Your Name <your.email@example.com> - ${VERSION}-1
- Initial RPM release